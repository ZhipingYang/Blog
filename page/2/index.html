<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Swift</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="苦逼的码农">
<meta property="og:type" content="website">
<meta property="og:title" content="Swift">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Swift">
<meta property="og:description" content="苦逼的码农">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Swift">
<meta name="twitter:description" content="苦逼的码农">
  
    <link rel="alternative" href="/atom.xml" title="Swift" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">XcodeYang</a></h1>
		</hgroup>

		
		<p class="header-subtitle">技术</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/51offer" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/p/1006062608078012/home" title="weibo">weibo</a>
					        
								<a class="mail" target="_blank" href="/ming.z@51offer.com" title="mail">mail</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Playground/" style="font-size: 10px;">Playground</a> <a href="/tags/blog-tools-ci/" style="font-size: 10px;">blog, tools, ci</a> <a href="/tags/javaScript/" style="font-size: 10px;">javaScript</a> <a href="/tags/phython/" style="font-size: 10px;">phython</a> <a href="/tags/shell/" style="font-size: 10px;">shell</a> <a href="/tags/博客/" style="font-size: 10px;">博客</a> <a href="/tags/同步异步/" style="font-size: 10px;">同步异步</a> <a href="/tags/开发效率/" style="font-size: 10px;">开发效率</a> <a href="/tags/效率/" style="font-size: 10px;">效率</a> <a href="/tags/游戏/" style="font-size: 10px;">游戏</a> <a href="/tags/物理引擎/" style="font-size: 10px;">物理引擎</a> <a href="/tags/研发杂谈/" style="font-size: 10px;">研发杂谈</a> <a href="/tags/线程/" style="font-size: 10px;">线程</a> <a href="/tags/网站/" style="font-size: 10px;">网站</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.tomatopeter.com/">tomatopeter&#39;s blog&#39;</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://ioi.im/">ming.z&#39;s blog</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">我们是一群爱折腾的技术宅，立志在留学行业做些好玩的事。如果你相信技术拥有强大的力量，有很多有趣的念头不知在何处能实践，不妨加入我们一起切磋。。。</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">XcodeYang</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">XcodeYang</h1>
			</hgroup>
			
			<p class="header-subtitle">技术</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/51offer" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/p/1006062608078012/home" title="weibo">weibo</a>
			        
						<a class="mail" target="_blank" href="/ming.z@51offer.com" title="mail">mail</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-2015-11-25" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/25/2015-11-25/" class="article-date">
  	<time datetime="2015-11-25T10:30:00.000Z" itemprop="datePublished">2015-11-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/25/2015-11-25/">IM中输入框的优化方案实现</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="IM中输入框的优化方案实现">IM中输入框的优化方案实现</h2><p><code>以下图的输入框为例</code></p>
<p><img src="https://cloud.githubusercontent.com/assets/9360037/11319390/0ad964a8-90b0-11e5-90aa-9d2ca1fa548e.png" alt="stand"></p>
<h4 id="输入框的呈现方式选择">输入框的呈现方式选择</h4><p><code>以下两个方法对比</code></p>
<ul>
<li>Keyboard的inputAccessoryView</li>
</ul>
<blockquote>
<p>相对推荐的方法，有更好的丰富的交互效果</p>
<p>可以与scrollView的一些属性直接绑定</p>
</blockquote>
<ul>
<li>InputView的frame适应</li>
</ul>
<blockquote>
<p>传统的方法</p>
<p>优点：灵活控制显示位置</p>
<p>缺点：过多的计算frame</p>
</blockquote>
<h3 id="InputAccessoryView方式">InputAccessoryView方式</h3><p><a href="https://github.com/ZhipingYang/UUKeyboardInputView" target="_blank" rel="external">案例见GitHub的Demo</a></p>
<blockquote>
<p>iOS的输入源都有输入源（keyboard及keyboard的配件InputAccessoryView），那通常的方法是输入源控件（Textfield、TextView等）使用一般的<code>InputView的frame适应</code></p>
</blockquote>
<p><strong>解释几个技巧点</strong></p>
<ul>
<li>InputView（ 输入源 ）的父视图作为该InputView的InputAccessoryView，要避免相互引用</li>
<li>巧用第三方不可见的InputView在适当时间点转移第一响应者给可见的InputView</li>
<li>完成编辑时去除第一响应者（注意iOS9下键盘响应逻辑视图层级都发生了变化）</li>
</ul>
<p><strong>主要代码</strong></p>
<p><img src="https://cloud.githubusercontent.com/assets/9360037/11436829/4b2d95f2-9523-11e5-8d66-8745354c0e99.png" alt="simulator screen shot nov 27 2015 4 17 38 pm"></p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 单例初始化</span></span><br><span class="line">+ (U<span class="built_in">UInputAccessoryView</span>*)sharedView &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="built_in">dispatch_once_t</span> once;</span><br><span class="line">    <span class="keyword">static</span> U<span class="built_in">UInputAccessoryView</span> *sharedView;</span><br><span class="line">    <span class="built_in">dispatch_once</span>(&amp;once, ^ &#123;</span><br><span class="line">        sharedView = [[U<span class="built_in">UInputAccessoryView</span> alloc] init];</span><br><span class="line">        sharedView-&gt;btnBack = [<span class="built_in">UIButton</span> buttonWithType:<span class="built_in">UIButtonTypeCustom</span>];</span><br><span class="line">        sharedView-&gt;btnBack<span class="variable">.frame</span> = <span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, U<span class="built_in">UIAV_MAIN_W</span>, U<span class="built_in">UIAV_MAIN_H</span>);</span><br><span class="line">        [sharedView-&gt;btnBack addTarget:sharedView action:<span class="keyword">@selector</span>(dismiss) forControlEvents:<span class="built_in">UIControlEventTouchUpInside</span>];</span><br><span class="line">        sharedView-&gt;btnBack<span class="variable">.backgroundColor</span>=[<span class="built_in">UIColor</span> clearColor];</span><br><span class="line">        <span class="built_in">UIToolbar</span> *toolbar = [[<span class="built_in">UIToolbar</span> alloc]initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, U<span class="built_in">UIAV_MAIN_W</span>, <span class="number">44</span>)];</span><br><span class="line">        sharedView-&gt;inputView = [[<span class="built_in">UITextField</span> alloc]initWithFrame:<span class="built_in">CGRectMake</span>(U<span class="built_in">UIAV_Edge_Hori</span>, U<span class="built_in">UIAV_Edge_Vert</span>, U<span class="built_in">UIAV_MAIN_W</span>-U<span class="built_in">UIAV_Btn_W</span>-<span class="number">4</span>*U<span class="built_in">UIAV_Edge_Hori</span>, U<span class="built_in">UIAV_Btn_H</span>)];</span><br><span class="line">        sharedView-&gt;inputView<span class="variable">.borderStyle</span> = <span class="built_in">UITextBorderStyleRoundedRect</span>;</span><br><span class="line">        sharedView-&gt;inputView<span class="variable">.returnKeyType</span> = <span class="built_in">UIReturnKeyDone</span>;</span><br><span class="line">        sharedView-&gt;inputView<span class="variable">.clearButtonMode</span> = <span class="built_in">UITextFieldViewModeWhileEditing</span>;</span><br><span class="line">        sharedView-&gt;inputView<span class="variable">.enablesReturnKeyAutomatically</span> = <span class="literal">YES</span>;</span><br><span class="line">        sharedView-&gt;inputView<span class="variable">.delegate</span> = sharedView;</span><br><span class="line">        [toolbar addSubview:sharedView-&gt;inputView];</span><br><span class="line">        sharedView-&gt;assistView = [[<span class="built_in">UITextField</span> alloc]init];</span><br><span class="line">        sharedView-&gt;assistView<span class="variable">.delegate</span> = sharedView;</span><br><span class="line">        sharedView-&gt;assistView<span class="variable">.returnKeyType</span> = <span class="built_in">UIReturnKeyDone</span>;</span><br><span class="line">        sharedView-&gt;assistView<span class="variable">.enablesReturnKeyAutomatically</span> = <span class="literal">YES</span>;</span><br><span class="line">        [sharedView-&gt;btnBack addSubview:sharedView-&gt;assistView];</span><br><span class="line">        sharedView-&gt;assistView<span class="variable">.inputAccessoryView</span> = toolbar;</span><br><span class="line">        sharedView-&gt;BtnSave = [<span class="built_in">UIButton</span> buttonWithType:<span class="built_in">UIButtonTypeCustom</span>];</span><br><span class="line">        sharedView-&gt;BtnSave<span class="variable">.frame</span> = <span class="built_in">CGRectMake</span>(U<span class="built_in">UIAV_MAIN_W</span>-U<span class="built_in">UIAV_Btn_W</span>-<span class="number">2</span>*U<span class="built_in">UIAV_Edge_Hori</span>, U<span class="built_in">UIAV_Edge_Vert</span>, U<span class="built_in">UIAV_Btn_W</span>, U<span class="built_in">UIAV_Btn_H</span>);</span><br><span class="line">        sharedView-&gt;BtnSave<span class="variable">.backgroundColor</span> = [<span class="built_in">UIColor</span> clearColor];</span><br><span class="line">        [sharedView-&gt;BtnSave setTitle:<span class="string">@"确定"</span> forState:<span class="built_in">UIControlStateNormal</span>];</span><br><span class="line">        [sharedView-&gt;BtnSave setTitleColor:[<span class="built_in">UIColor</span> redColor] forState:<span class="built_in">UIControlStateNormal</span>];</span><br><span class="line">        [sharedView-&gt;BtnSave addTarget:sharedView action:<span class="keyword">@selector</span>(Done) forControlEvents:<span class="built_in">UIControlEventTouchUpInside</span>];</span><br><span class="line">        [toolbar addSubview:sharedView-&gt;BtnSave];</span><br><span class="line">    &#125;);</span><br><span class="line">	<span class="built_in">CGRectGetHeight</span>([<span class="built_in">UIScreen</span> mainScreen]<span class="variable">.bounds</span>);</span><br><span class="line">	<span class="keyword">return</span> sharedView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>实现逻辑代码</code></p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">+ (<span class="keyword">void</span>)showKeyboardType:(<span class="built_in">UIKeyboardType</span>)type content:(<span class="built_in">NSString</span> *)content Block:(U<span class="built_in">UInputAccessoryBlock</span>)block</span><br><span class="line">&#123;</span><br><span class="line">    [[U<span class="built_in">UInputAccessoryView</span> sharedView] show:block</span><br><span class="line">                               keyboardType:type</span><br><span class="line">                                    content:content];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)show:(U<span class="built_in">UInputAccessoryBlock</span>)block keyboardType:(<span class="built_in">UIKeyboardType</span>)type content:(<span class="built_in">NSString</span> *)content</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">UIWindow</span> *window=[<span class="built_in">UIApplication</span> sharedApplication]<span class="variable">.keyWindow</span>;</span><br><span class="line">    [window addSubview:btnBack];</span><br><span class="line"></span><br><span class="line">    inputBlock = block;</span><br><span class="line">    inputView<span class="variable">.text</span> = content;</span><br><span class="line">    inputView<span class="variable">.keyboardType</span> = type;</span><br><span class="line">    assistView<span class="variable">.keyboardType</span> = type;</span><br><span class="line">    [assistView becomeFirstResponder];</span><br><span class="line">    shouldDismiss = <span class="literal">NO</span>;</span><br><span class="line">    </span><br><span class="line">    [[<span class="built_in">NSNotificationCenter</span> defaultCenter] addObserverForName:<span class="built_in">UIKeyboardDidShowNotification</span></span><br><span class="line">                                                      object:<span class="literal">nil</span></span><br><span class="line">                                                       queue:<span class="literal">nil</span></span><br><span class="line">                                                  usingBlock:^(<span class="built_in">NSNotification</span> * _Nonnull note) &#123;</span><br><span class="line">                                                      <span class="keyword">if</span> (!shouldDismiss) &#123;</span><br><span class="line">                                                          [inputView becomeFirstResponder];</span><br><span class="line">                                                      &#125;</span><br><span class="line">                                                  &#125;];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)Done</span><br><span class="line">&#123;</span><br><span class="line">    [inputView resignFirstResponder];</span><br><span class="line">    !inputBlock ?: inputBlock(inputView<span class="variable">.text</span>);</span><br><span class="line">    [<span class="keyword">self</span> dismiss];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">BOOL</span>)textFieldShouldReturn:(<span class="built_in">UITextField</span> *)textField</span><br><span class="line">&#123;</span><br><span class="line">    [<span class="keyword">self</span> Done];</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)dismiss</span><br><span class="line">&#123;</span><br><span class="line">    shouldDismiss = <span class="literal">YES</span>;</span><br><span class="line">    [inputView resignFirstResponder];</span><br><span class="line">    [btnBack removeFromSuperview];</span><br><span class="line">    [[<span class="built_in">NSNotificationCenter</span> defaultCenter] removeObserver:<span class="keyword">self</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="InputView的frame适应">InputView的frame适应</h3><p><a href="https://github.com/ZhipingYang/UUChatSwift/blob/master/UUChatTableViewSwift/ChatTableViewController.swift#L123" target="_blank" rel="external">案例见GitHub的Demo</a></p>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 键盘响应布局</span></span><br><span class="line">@objc func keyboardFrameChanged<span class="params">(notification: NSNotification)</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">let</span> dict = NSDictionary<span class="params">(dictionary: notification.userInfo!)</span></span><br><span class="line">    <span class="built_in">let</span> keyboardValue = dict.objectForKey<span class="params">(UIKeyboardFrameEndUserInfoKey)</span> as<span class="built_in">!</span> NSValue</span><br><span class="line">    <span class="built_in">let</span> bottomDistance = mainScreenSize<span class="params">()</span>.height - keyboardValue.CGRectValue<span class="params">()</span>.origin.y</span><br><span class="line">    <span class="built_in">let</span> duration = Double<span class="params">(dict.objectForKey<span class="params">(UIKeyboardAnimationDurationUserInfoKey)</span> as! NSNumber)</span></span><br><span class="line">    </span><br><span class="line">    UIView.animateWithDuration<span class="params">(duration, animations: &#123;</span><br><span class="line">        self.inputViewConstraint!.constant = -bottomDistance</span><br><span class="line">        self.view.layoutIfNeeded<span class="params">()</span></span><br><span class="line">        &#125;, completion: &#123;</span><br><span class="line">            <span class="params">(value: Bool)</span> in</span><br><span class="line">            self.chatTableView.scrollToBottom<span class="params">(animation: <span class="literal">true</span>)</span></span><br><span class="line">    &#125;)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ScrollView下拉动态修改keyboard（InputView）的frame">ScrollView下拉动态修改keyboard（InputView）的frame</h3><p><strong>常见隐藏keyboard的一些方式</strong></p>
<ul>
<li>TouchBeigin</li>
<li>DidDrag</li>
<li>EndDrag</li>
<li>Interactive</li>
</ul>
<p><strong>iOS7 开始，ScrollView提供</strong></p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="annotation">@available</span>(iOS <span class="number">7.0</span>, *)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> UIScrollViewKeyboardDismissMode : Int &#123;</span><br><span class="line">    <span class="keyword">case</span> None</span><br><span class="line">    <span class="keyword">case</span> OnDrag <span class="comment">// dismisses the keyboard when a drag begins</span></span><br><span class="line">    <span class="keyword">case</span> Interactive <span class="comment">// the keyboard follows the dragging touch off screen, and may be pulled upward again to cancel the dismiss</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>所以在ScrollView上添加<code>scrollView.keyboardDismissMode = UIScrollViewKeyboardDismissMode.Interactive</code>就可以了。<br>效果详见iOS7及以上原生设备的短信滑动消失键盘的交互</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-2015-11-13" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/13/2015-11-13/" class="article-date">
  	<time datetime="2015-11-13T10:30:00.000Z" itemprop="datePublished">2015-11-13</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/13/2015-11-13/">周精益分享 - Swift入门专题</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="『图像和滤镜』_-_图像选择器">『图像和滤镜』 - 图像选择器</h2><p><code>我们可以使用以下常规的图像获取方式</code></p>
<p><img src="./Simulator Screen Shot Nov 12, 2015, 8.11.12 PM.png" alt="Alt text"></p>
<p><code>图库与相册</code></p>
<p><img src="./Simulator Screen Shot Nov 12, 2015, 8.16.30 PM.png" alt="Alt text"></p>
<h4 id="系统自带">系统自带</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="func"><span class="keyword">func</span> <span class="title">touchesBegan</span><span class="params">(touches: Set&lt;UITouch&gt;, withEvent event: UIEvent?)</span></span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> sheet = <span class="type">UIAlertController</span>(title: <span class="string">"图片选择"</span>, message: <span class="string">"简单版的三种选择"</span>, preferredStyle: .<span class="type">ActionSheet</span>)</span><br><span class="line">    <span class="comment">// 判断设备是否支持相机（iPod &amp; Simulator）</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="type">UIImagePickerController</span>.isSourceTypeAvailable(.<span class="type">Camera</span>)) &#123;</span><br><span class="line">        sheet.addAction(<span class="type">UIAlertAction</span>.<span class="keyword">init</span>(title: <span class="string">"Camera"</span>, style: .<span class="type">Default</span>, handler: &#123; <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">self</span>.showPhotoes(.<span class="type">Camera</span>)</span><br><span class="line">        &#125;))</span><br><span class="line">    &#125;</span><br><span class="line">    sheet.addAction(<span class="type">UIAlertAction</span>.<span class="keyword">init</span>(title: <span class="string">"PhotoLibrary"</span>, style: .<span class="type">Default</span>, handler: &#123; <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">self</span>.showPhotoes(.<span class="type">PhotoLibrary</span>)</span><br><span class="line">    &#125;))</span><br><span class="line">    sheet.addAction(<span class="type">UIAlertAction</span>.<span class="keyword">init</span>(title: <span class="string">"SavedPhotosAlbum"</span>, style: .<span class="type">Default</span>, handler: &#123; <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">self</span>.showPhotoes(.<span class="type">SavedPhotosAlbum</span>)</span><br><span class="line">    &#125;))</span><br><span class="line">    sheet.addAction(<span class="type">UIAlertAction</span>.<span class="keyword">init</span>(title: <span class="string">"Cancel"</span>, style: .<span class="type">Cancel</span>, handler: <span class="literal">nil</span>))</span><br><span class="line">    presentViewController(sheet, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">showPhotoes</span><span class="params">(source: UIImagePickerControllerSourceType)</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> controller = <span class="type">UIImagePickerController</span>()</span><br><span class="line">    controller.delegate = <span class="keyword">self</span></span><br><span class="line">    controller.sourceType = source</span><br><span class="line">    controller.allowsEditing = source == .<span class="type">SavedPhotosAlbum</span> ? <span class="literal">true</span>:<span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">self</span>.presentViewController(controller, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>UIImagePickerController的代理</code><br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">imagePickerControllerDidCancel</span><span class="params">(picker: UIImagePickerController)</span></span> &#123;</span><br><span class="line">    dismissViewControllerAnimated(<span class="literal">true</span>, completion: <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 非常坑，这个方法废弃了但代码提示只有它</span></span><br><span class="line"><span class="comment">//	func imagePickerController(picker: UIImagePickerController, didFinishPickingImage image: UIImage, editingInfo: [String : AnyObject]?) &#123;</span></span><br><span class="line"><span class="comment">//	&#125;</span></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">imagePickerController</span><span class="params">(picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : AnyObject])</span></span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h5 id="info字典介绍"><a href="https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIImagePickerControllerDelegate_Protocol/#//apple_ref/doc/constant_group/Editing_Information_Keys" target="_blank" rel="external">info字典介绍</a></h5><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UIImagePickerControllerMediaType</span>: String</span><br><span class="line"><span class="built_in">UIImagePickerControllerOriginalImage</span>: <span class="built_in">UIImage</span></span><br><span class="line"><span class="built_in">UIImagePickerControllerEditedImage</span>: <span class="built_in">UIImage</span></span><br><span class="line"><span class="built_in">UIImagePickerControllerCropRect</span>: <span class="built_in">NSValue</span> -&gt; <span class="built_in">CGRect</span></span><br><span class="line"><span class="comment">// MediaURL只为视频提供</span></span><br><span class="line"><span class="built_in">UIImagePickerControllerMediaURL</span>:  <span class="built_in">NSURL</span></span><br><span class="line"><span class="comment">// LivePhoto是一张图片，保留那个moment的前后动作和声音</span></span><br><span class="line"><span class="built_in">UIImagePickerControllerLivePhoto</span>: String</span><br><span class="line"><span class="comment">// 摄像摄影时返回media的信息字典</span></span><br><span class="line"><span class="built_in">UIImagePickerControllerMediaMetadata</span>: <span class="built_in">NSDictionary</span></span><br></pre></td></tr></table></figure>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SavedPhotosAlbum 的 info 示例</span></span><br><span class="line"></span><br><span class="line">▿ 5 elements</span><br><span class="line">  ▿ [0] : 2 elements</span><br><span class="line">    -<span class="ruby"> .<span class="number">0</span> <span class="symbol">:</span> <span class="string">"UIImagePickerControllerCropRect"</span></span><br><span class="line"></span>  ▿ [1] : 2 elements</span><br><span class="line">    -<span class="ruby"> .<span class="number">0</span> <span class="symbol">:</span> <span class="string">"UIImagePickerControllerOriginalImage"</span></span><br><span class="line"></span>  ▿ [2] : 2 elements</span><br><span class="line">    -<span class="ruby"> .<span class="number">0</span> <span class="symbol">:</span> <span class="string">"UIImagePickerControllerReferenceURL"</span></span><br><span class="line"></span>    -<span class="ruby"> .<span class="number">1</span> <span class="symbol">:</span> assets-<span class="symbol">library:</span>/<span class="regexp">/asset/asset</span>.<span class="constant">JPG</span>?id=<span class="number">99</span>D53A1F-<span class="constant">FEEF</span>-<span class="number">40</span>E1-<span class="number">8</span>BB3-<span class="number">7</span>DD55A43C8B7&amp;ext=<span class="constant">JPG</span></span><br><span class="line"></span>  ▿ [3] : 2 elements</span><br><span class="line">    -<span class="ruby"> .<span class="number">0</span> <span class="symbol">:</span> <span class="string">"UIImagePickerControllerMediaType"</span></span><br><span class="line"></span>    -<span class="ruby"> .<span class="number">1</span> <span class="symbol">:</span> public.image</span><br><span class="line"></span>  ▿ [4] : 2 elements</span><br><span class="line">    -<span class="ruby"> .<span class="number">0</span> <span class="symbol">:</span> <span class="string">"UIImagePickerControllerEditedImage"</span></span></span><br></pre></td></tr></table></figure>
<h3 id="自定义">自定义</h3><p><img src="./1447343597718.png" alt="Alt text"></p>
<p>遍历相册的所有图片<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AssetsLibrary.framework</span></span><br><span class="line"><span class="comment">// ALAssetsLibrary 的使用,但是它慢慢的被放弃了</span></span><br><span class="line">    <span class="func"><span class="keyword">func</span> <span class="title">loadLocalPhotoes</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">var</span> countOne = <span class="number">0</span></span><br><span class="line">        <span class="comment">//ALAssetsGroupSavedPhotos表示只读取相机胶卷（ALAssetsGroupAll则读取全部相簿）</span></span><br><span class="line">        assetsLibrary.enumerateGroupsWithTypes(<span class="type">ALAssetsGroupSavedPhotos</span>, usingBlock: &#123;</span><br><span class="line">            (group: <span class="type">ALAssetsGroup</span>!, stop) <span class="keyword">in</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">"is goin"</span>)</span><br><span class="line">            <span class="keyword">if</span> group != <span class="literal">nil</span> &#123;</span><br><span class="line">                <span class="keyword">let</span> assetBlock : <span class="type">ALAssetsGroupEnumerationResultsBlock</span> = &#123;</span><br><span class="line">                    (result: <span class="type">ALAsset</span>!, index: <span class="type">Int</span>, stop) <span class="keyword">in</span></span><br><span class="line">                    <span class="keyword">if</span> result != <span class="literal">nil</span> &#123;</span><br><span class="line">                        <span class="keyword">self</span>.assets.append(result)</span><br><span class="line">                        countOne++</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                group.enumerateAssetsUsingBlock(assetBlock)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">"assets:<span class="subst">\(countOne)</span>"</span>)</span><br><span class="line">                <span class="keyword">self</span>.startChangeLocalImages(<span class="number">0</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            &#125;, failureBlock: &#123; (fail) <span class="keyword">in</span></span><br><span class="line">                <span class="built_in">print</span>(fail)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="comment">// 展现本地图片</span></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">startChangeLocalImages</span><span class="params">(<span class="keyword">var</span> index: Int)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> index==assets.<span class="built_in">count</span> &#123;</span><br><span class="line">            index = <span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> myAsset = assets[index]</span><br><span class="line">        <span class="keyword">let</span> image = <span class="type">UIImage</span>(<span class="type">CGImage</span>:myAsset.thumbnail().takeUnretainedValue())</span><br><span class="line">        <span class="keyword">self</span>.backImageView.image = image</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> popTime = dispatch_time(<span class="type">DISPATCH_TIME_NOW</span>, <span class="type">Int64</span>(<span class="number">1</span> * <span class="type">Double</span>(<span class="type">NSEC_PER_SEC</span>)))</span><br><span class="line">        dispatch_after(popTime, dispatch_get_main_queue()) &#123;</span><br><span class="line">            <span class="keyword">self</span>.startChangeLocalImages(index+<span class="number">1</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>iOS9 开始使用新库<br><a href="https://developer.apple.com/library/prerelease/ios/documentation/Photos/Reference/PHPhotoLibrary_Class/index.html" target="_blank" rel="external">PHPhotoLibrary</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-2015-10-30" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/30/2015-10-30/" class="article-date">
  	<time datetime="2015-10-30T10:30:00.000Z" itemprop="datePublished">2015-10-30</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/30/2015-10-30/">周精益分享 - 程序员装逼指南</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="『图像和滤镜』">『图像和滤镜』</h2><h3 id="图像">图像</h3><h4 id="常见的图像格式">常见的图像格式</h4><ul>
<li>png（Portable Network Graphic）便携式网络图形格式</li>
<li>tiff、tif（Tagged Image File Format）标记图像文件格式</li>
<li>jpg、jpeg（Joint Photographic Experts Group）联合摄影专家组</li>
<li>gif（Graphic Interchange Format）图形交换格式</li>
</ul>
<h4 id="图像实例化">图像实例化</h4><ul>
<li><p>imageNamed:</p>
<blockquote>
<p>使用频率高，内存缓存优化</p>
</blockquote>
</li>
<li><p>imageWithContentsOfFile:</p>
<blockquote>
<p>单次使用，暂时不清楚如何支持ImageAssert下的图片路径</p>
</blockquote>
</li>
<li><p>imageWithData:</p>
<blockquote>
<p>本地或网络的文件数据加载</p>
</blockquote>
</li>
<li><p>imageWithCGImage:</p>
<blockquote>
<p>绘制生成图，代码如下</p>
</blockquote>
</li>
</ul>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 旧图局部裁剪</span></span><br><span class="line">   <span class="built_in">CGImageRef</span> myImageRef = [oldImage <span class="built_in">CGImageRef</span>];</span><br><span class="line">   <span class="built_in">CGRect</span> subRect = <span class="built_in">CGRectMake</span>(<span class="number">20</span>, <span class="number">20</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">   <span class="built_in">CGImageRef</span> cgCrop = <span class="built_in">CGImageCreateWithImageInRect</span>(myImageRef, subRect);</span><br><span class="line">   <span class="built_in">UIImage</span> *imageCrop = [<span class="built_in">UIImage</span> imageWith<span class="built_in">CGImage</span>:cgCrop];</span><br></pre></td></tr></table></figure>
<h4 id="显示图像">显示图像</h4><blockquote>
<p>屏幕的缩放因子，导致我们需要@2x及@3x图，对视图截图操作也同样需要针对Retina及plus优化<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">UIImage</span>*)screenShotBy:(<span class="built_in">UIImageView</span>*)imagView</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//  UIGraphicsBeginImageContext(imagView.bounds.size);</span></span><br><span class="line"><span class="comment">// 2表示Retina，3表示plus分辨率，1正常，0则是当前设备的缩放因子</span></span><br><span class="line"><span class="comment">// YES 表示不包含图像的alpha通道</span></span><br><span class="line">	<span class="built_in">UIGraphicsBeginImageContextWithOptions</span>((imagView<span class="variable">.bounds</span><span class="variable">.size</span>), <span class="literal">YES</span>, <span class="number">2</span>);</span><br><span class="line">	[imagView<span class="variable">.layer</span> renderInContext:<span class="built_in">UIGraphicsGetCurrentContext</span>()];</span><br><span class="line">	<span class="built_in">UIImage</span>*image = <span class="built_in">UIGraphicsGetImageFromCurrentImageContext</span>();</span><br><span class="line">	<span class="built_in">UIGraphicsEndImageContext</span>();</span><br><span class="line">	<span class="keyword">return</span> image;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h5 id="contentModel">contentModel</h5><p><em>图像内容展现方式</em></p>
<ul>
<li>UIViewContentModelScaleToFill（默认）</li>
<li>UIViewContentModelScaleAspectFill（下拉放大）</li>
<li>UIViewContentModelScaleAspectFit</li>
<li>UIViewContentModelCenter （一些停靠模式）</li>
<li>UIViewContentModelTop/Bottom</li>
<li>UIViewContentModelLeft/Right</li>
</ul>
<h5 id="拉伸属性">拉伸属性</h5><p><code>代码</code><br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方法一</span></span><br><span class="line">image=[oldIconImage <span class="string">stretchableImageWithLeftCapWidth:</span><span class="number">10</span> <span class="string">topCapHeight:</span><span class="number">12</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法二</span></span><br><span class="line">image = [oldIconImage <span class="string">resizableImageWithCapInsets:</span>UIEdgeInsetsMake(<span class="number">17</span>, <span class="number">17</span>, <span class="number">17</span>, <span class="number">25</span>)];</span><br></pre></td></tr></table></figure></p>
<p><code>ImageAssert</code></p>
<p><img src="./1446137205500.png" alt="Alt text"><br>使用slicing，小变大无视差<br><img src="./1446137161636.png" alt="Alt text"></p>
<hr>
<h3 id="图像选择器">图像选择器</h3><h4 id="系统自带">系统自带</h4><h4 id="自定义">自定义</h4><hr>
<h3 id="滤镜">滤镜</h3><h3 id="人脸识别">人脸识别</h3>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-2015-10-23" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/23/2015-10-23/" class="article-date">
  	<time datetime="2015-10-23T10:30:00.000Z" itemprop="datePublished">2015-10-23</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/23/2015-10-23/">周精益分享 - 英语</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="英语，程序员">英语，程序员</h2><h3 id="网站">网站</h3><ul>
<li><p><a href="http://www.italki.com" target="_blank" rel="external">iTalki</a></p>
<blockquote>
<p>语言交换及专业老师订课辅导的网站</p>
</blockquote>
</li>
<li><p><a href="https://www.youtube.com/channel/UCwA7Aepp7nRUJNa8roQ-6Bw" target="_blank" rel="external">YouTube一个订阅号</a></p>
<blockquote>
<p>比较有吸引力的老师，他的同事频道也很不错</p>
</blockquote>
</li>
<li><p><a href="http://www.raywenderlich.com/" target="_blank" rel="external">rayWenderlich</a></p>
<blockquote>
<p>主要是iOS方面的，安卓覆盖一些。涵盖文字、视频、播客三方面</p>
</blockquote>
</li>
</ul>
<h3 id="APP">APP</h3><ul>
<li><p>飞鱼口语</p>
<blockquote>
<p>国内开发的一个及时练习口语的APP，主要是方便</p>
</blockquote>
</li>
<li><p>每日英语听力（欧陆词典推出的）</p>
<blockquote>
<p>radio 模块很不错，资源不算多但比较有质量。</p>
</blockquote>
</li>
<li><p>Podcast</p>
<ul>
<li>圆桌会议（RoundTable）</li>
<li>rayWenderlich （程序员职业发展及新技术点探讨，英式口语）</li>
</ul>
</li>
</ul>
<h3 id="工具">工具</h3><ul>
<li>Skype 和志同道合的人交流，练习口语 </li>
</ul>
<h3 id="EF_Education">EF Education</h3><ul>
<li><a href="http://ec.ef.com" target="_blank" rel="external">网站地址</a><blockquote>
<p>想小试牛刀的记得想我拿一下账号密码</p>
</blockquote>
</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-2015-10-16" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/16/2015-10-16/" class="article-date">
  	<time datetime="2015-10-16T10:30:00.000Z" itemprop="datePublished">2015-10-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/16/2015-10-16/">周精益分享-谈谈未来、梦想、职业规划</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="兴趣主导，快乐很重要_-_杨志平">兴趣主导，快乐很重要 - 杨志平</h2><ul>
<li><p>兴趣</p>
<ul>
<li>在失去当前工作兴趣之前，不会转行</li>
<li>职业规划随兴趣走</li>
</ul>
</li>
<li><p>肉身翻墙</p>
<ul>
<li>出去走一遭，趁年轻（工作或打工旅行）</li>
<li>去牛逼公司镀金</li>
</ul>
</li>
<li><p>终极目标</p>
<ul>
<li>年轻时，向往自由工作者的工作方式，能够养活自己的游行工作方式</li>
<li>适当年纪收心回归平常心（保持感兴趣的工作即可）</li>
</ul>
</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-2015-09-25" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/09/25/2015-09-25/" class="article-date">
  	<time datetime="2015-09-25T10:30:00.000Z" itemprop="datePublished">2015-09-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/25/2015-09-25/">设计规范交流</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Label的一些使用规范_-_杨志平">Label的一些使用规范 - 杨志平</h1><h2 id="动态适应字体大小">动态适应字体大小</h2><blockquote>
<p>iOS系统自带的常见字体样式（字号及粗细等等）</p>
<ul>
<li>UIFontTextStyleHeadline</li>
<li>UIFontTextStyleSubheadline</li>
<li>UIFontTextStyleBody</li>
<li>UIFontTextStyleFootnote</li>
<li>UIFontTextStyleCaption1</li>
<li>UIFontTextStyleCaption2</li>
</ul>
</blockquote>
<h3 id="效果如下：">效果如下：</h3><p><img src="http://useyourloaf.com/assets/images/2013/2013-12-16-002.png" alt="Font"></p>
<h3 id="代码">代码</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 字体初始化</span></span><br><span class="line"><span class="built_in">UIFont</span> *font = [<span class="built_in">UIFont</span> preferredFontForTextStyle:<span class="built_in">UIFontTextStyleBody</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通知需要刷新的文本字体</span></span><br><span class="line">    [[<span class="built_in">NSNotificationCenter</span> defaultCenter]addObserver:<span class="keyword">self</span></span><br><span class="line">                                           selector:<span class="keyword">@selector</span>(userTextSizeDidChange)</span><br><span class="line">                                               name:<span class="built_in">UIContentSizeCategoryDidChangeNotification</span></span><br><span class="line">                                             object:<span class="literal">nil</span>];</span><br></pre></td></tr></table></figure>
<h1 id="国际化支持（适配注意点）">国际化支持（适配注意点）</h1><h4 id="工具：genstrings">工具：<a href="https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/genstrings.1.html" target="_blank" rel="external">genstrings</a></h4><h4 id="参考：博客链接">参考：<a href="http://objccn.io/issue-9-3/" target="_blank" rel="external">博客链接</a></h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">先看看它的宏定义：</span><br><span class="line"><span class="hexcolor">#def</span>ine <span class="function"><span class="title">NSLocalizedString</span><span class="params">(key, comment)</span></span> </span><br><span class="line">[[NSBundle mainBundle] localizedStringForKey:(key) value:@<span class="string">""</span> <span class="tag">table</span>:nil]</span><br></pre></td></tr></table></figure>
<p><strong>本地化对象：</strong>标签和按钮上的文本，或者在运行时获取的字符串和数据动态生成的字符串。</p>
<h3 id="难点">难点</h3><h4 id="不同语言的语法问题">不同语言的语法问题</h4><blockquote>
<p>语序，人称不一致：<br>「Paul invited you」和「You invited Paul」 -&gt; 「%@ invited %@」，看似可以<br>以德语为例，「Paul invited you」译为「Paul hat dich eingeladen」，<br>而「You invited Paul」则译为「Du hast Paul eingeladen」。<br>正确处理其他语言的特殊语法方案:「%@ invited you」和「You invited %@」。</p>
</blockquote>
<h4 id="一词多意">一词多意</h4><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">run</span> <span class="bash">-&gt; </span><br><span class="line"></span>	 vt. &amp; vi. 跑</span><br><span class="line">	 移动</span><br><span class="line">	 (使)流动</span><br><span class="line">	 n. 跑, 奔跑</span><br><span class="line">	 旅行, 旅程</span><br><span class="line">	 行驶路线</span><br><span class="line">	 时期; 一段时间</span><br></pre></td></tr></table></figure>
<p>正确做法：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">NSLocalizedString</span><span class="params">(@<span class="string">"activity-profile.title.the-run"</span>, nil)</span></span>  </span><br><span class="line"><span class="function"><span class="title">NSLocalizedString</span><span class="params">(@<span class="string">"home.button.start-run"</span>, nil)</span></span></span><br></pre></td></tr></table></figure>
<p>或者：(完全没有试过)</p>
<blockquote>
<p>NSLocalizedString 有一些变体能够提供更多字符串本地化的操作方式。NSLocalizedStringFromTable 接收 key、table 和 comment 这三个参数，其中 table 参数表示该字符串对应的一个表格，genstrings 会为表中的每一个条目生成一个以条目名称（假设为 table-item）命名的独立字符串文件 table-item.strings。<br>这样你就可以把字符串文件分割成几个小一些的文件。在一个庞大的项目或者团队中工作时，这一点显得尤为重要。同时这也让合并原有的和重新生成的字符串文件变得容易一些。</p>
</blockquote>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">NSLocalizedStringFromTable</span><span class="params">(@<span class="string">"home.button.start-run"</span>, @<span class="string">"ActivityTracker"</span>, @<span class="string">"some comment.."</span>)</span></span></span><br></pre></td></tr></table></figure>
<h3 id="调试本地化字符串（拓展）">调试本地化字符串（拓展）</h3><p>应用支持的语言版本越多，确保所有元素都正确显示就越难。但是这里有一些默认的用户选项和工具可以减轻你的负担。</p>
<blockquote>
<p>NSDoubleLocalizedStrings<br>AppleTextDirection<br>NSForceRightToLeftWritingDirection<br>选项保证你的布局不会因为长字符串或者从右往左读的语言而混乱。</p>
<p>NSShowNonLocalizedStrings<br>NSShowNonLocalizableStrings<br>则可以帮助你找到没有翻译的字符串和根本没有制定字符串本地化宏的字符串。</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-2015-09-11" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/09/14/2015-09-11/" class="article-date">
  	<time datetime="2015-09-14T12:00:00.000Z" itemprop="datePublished">2015-09-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/14/2015-09-11/">浅拷贝与深拷贝</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="浅拷贝与深拷贝">浅拷贝与深拷贝</h2><blockquote>
<p> 程序中经常会遇到集合类的传值 <br><br> <strong> 坑：</strong> 数组操作时对于数组中的对象拷贝</p>
</blockquote>
<h3 id="目的：">目的：</h3><p>观察array1、mArrayCopy、mArrayCopy2 三者区别</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSArray</span> *array1 = [<span class="built_in">NSArray</span> arrayWithObjects:[<span class="built_in">NSMutableString</span> stringWithString:<span class="string">@"a"</span>],<span class="string">@"b"</span>,<span class="string">@"c"</span>,<span class="literal">nil</span>];</span><br><span class="line"><span class="built_in">NSArray</span> *mArrayCopy = [[<span class="built_in">NSArray</span> alloc] initWithArray:array1 copyItems:<span class="literal">YES</span>];</span><br><span class="line"><span class="built_in">NSArray</span>* mArrayCopy2 = [<span class="built_in">NSKeyedUnarchiver</span> unarchiveObjectWithData:[<span class="built_in">NSKeyedArchiver</span> archivedDataWithRootObject: array1]];</span><br></pre></td></tr></table></figure>
<h3 id="首先了解copy与retain的区别">首先了解copy与retain的区别</h3><p><strong> OC对象引用计数器：屋里开灯规则 </strong></p>
<blockquote>
<p>copy是创建一个新对象，retain是创建一个指针，引用对象计数加1。Copy属性表示两个对象内容相同，新的对象retain为1 ，与旧有对象的引用计数无关，旧有对象没有变化。</p>
<p>retain属性表示两个对象地址相同（建立一个指针，指针拷贝），内容当然相同，这个对象的retain值+1也就是说，retain 是指针拷贝，copy 是内容拷贝。</p>
</blockquote>
<h3 id="主角：copy、mutableCopy">主角：copy、mutableCopy</h3><p><strong><em>注意：可变和不可变对象使用copy、mutableCopy的区别</em></strong></p>
<blockquote>
<p>遵守NSCopying 协议的类可以发送copy消息，<br>遵守NSMutableCopying 协议的类才可以发送mutableCopy消息。</p>
<p>默认的ios类并没有遵守这两个协议<br>自定义copy 必须遵守NSCopying,并且实现 copyWithZone: 方法<br>自定义mutableCopy 那么就必须遵守NSMutableCopying,并且实现 mutableCopyWithZone: 方法</p>
</blockquote>
<h3 id="实例">实例</h3><h5 id="系统的非容器类对象">系统的非容器类对象</h5><blockquote>
<p>这里指的是NSString,NSNumber等等一类的对象。</p>
</blockquote>
<p>示例1：<br>不可变string</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSString</span> *string = <span class="string">@"origionStr"</span>;</span><br><span class="line"><span class="built_in">NSString</span> *string2 = string;</span><br><span class="line"><span class="built_in">NSString</span> *stringCopy = [string <span class="keyword">copy</span>];</span><br><span class="line"><span class="built_in">NSMutableString</span> *stringMCopy = [string mutableCopy];</span><br><span class="line">[stringMCopy appendString:<span class="string">@"!!!!"</span>];</span><br><span class="line"><span class="comment">// log</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"string      = %p %p %@ "</span>,string,&amp;string,string);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"string2     = %p %p %@ "</span>,string2,&amp;string2,string2);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"stringCopy  = %p %p %@ "</span>,stringCopy,&amp;stringCopy,stringCopy);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"stringMCopy = %p %p %@ "</span>,stringMCopy,&amp;stringMCopy,stringMCopy);</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">string      = <span class="number">0x1064e70</span>88		0x7fff<span class="number">597190a0</span> origionStr </span><br><span class="line">string2     = <span class="number">0x1064e70</span>88 		0x7fff<span class="number">59719098</span> origionStr </span><br><span class="line">stringCopy  = <span class="number">0x1064e70</span>88 		0x7fff<span class="number">59719090</span> origionStr </span><br><span class="line">stringMCopy = 0x7fafebdbb<span class="number">4b0	0x7</span>fff<span class="number">59719088</span> origionStr!!!!</span><br></pre></td></tr></table></figure>
<p>示例2：<br>可变string</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">NSMutableString *<span class="built_in">string</span> = [NSMutableString stringWithStrin<span class="variable">g:</span> @<span class="string">"origion"</span>];</span><br><span class="line">NSString *stringCopy = [<span class="built_in">string</span> <span class="built_in">copy</span>];</span><br><span class="line">NSMutableString *mStringCopy = [<span class="built_in">string</span> <span class="built_in">copy</span>];</span><br><span class="line">NSMutableString *stringMCopy = [<span class="built_in">string</span> mutableCopy];</span><br><span class="line">[<span class="built_in">string</span> appendStrin<span class="variable">g:</span>@<span class="string">" origion!"</span>];</span><br><span class="line">[stringMCopy appendStrin<span class="variable">g:</span>@<span class="string">"!!"</span>];</span><br><span class="line">NSLog(@<span class="string">"string      = %p %@"</span>,<span class="built_in">string</span>,<span class="built_in">string</span>);</span><br><span class="line">NSLog(@<span class="string">"stringCopy  = %p %@"</span>,stringCopy,stringCopy);</span><br><span class="line">NSLog(@<span class="string">"stringMCopy = %p %@"</span>,mStringCopy,mStringCopy);</span><br><span class="line">NSLog(@<span class="string">"stringMCopy = %p %@"</span>,stringMCopy,stringMCopy);</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">string </span>     = <span class="number">0x7fafebdec820</span> origion origion!</span><br><span class="line"><span class="keyword">stringCopy </span> = <span class="number">0x7fafebdcb8c0</span> origion</span><br><span class="line"><span class="keyword">stringMCopy </span>= <span class="number">0x7fafebda4320</span> origion</span><br><span class="line"><span class="keyword">stringMCopy </span>= <span class="number">0x7fafebd32890</span> origion!!</span><br></pre></td></tr></table></figure>
<blockquote>
<p>对于系统的非容器类对象，我们可以认为，如果对一不可变对象复制，copy是指针复制（浅拷贝）和mutableCopy就是对象复制（深拷贝）。如果是对可变对象复制，都是深拷贝，但是copy返回的对象是不可变的。</p>
</blockquote>
<h5 id="系统的容器类对象">系统的容器类对象</h5><blockquote>
<p>指NSArray,NSSet,NSDictionary等。对于容器类本身，上面讨论的结论也是适用的，需要探讨的是复制后容器内对象的变化。</p>
</blockquote>
<p>示例1：<br>不可变数组</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//copy返回不可变对象，mutablecopy返回可变对象</span></span><br><span class="line"><span class="built_in">NSArray</span> *array1 = [<span class="built_in">NSArray</span> arrayWithObjects:<span class="string">@"a"</span>,<span class="string">@"b"</span>,<span class="string">@"c"</span>,<span class="literal">nil</span>];</span><br><span class="line"><span class="built_in">NSArray</span> *arrayCopy1 = [array1 <span class="keyword">copy</span>];</span><br><span class="line"><span class="built_in">NSMutableArray</span> *mArrayCopy1 = [array1 mutableCopy];</span><br><span class="line">[mArrayCopy1 addObject:<span class="string">@"de"</span>];</span><br><span class="line">[mArrayCopy1 removeObjectAtIndex:<span class="number">0</span>];</span><br><span class="line"><span class="comment">// log</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"array1      = %p %@ %p %@"</span>,array1,array1,array1[<span class="number">1</span>],array1[<span class="number">1</span>]);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"arrayCopy1  = %p %@ %p %@"</span>,arrayCopy1,arrayCopy1,arrayCopy1[<span class="number">1</span>],arrayCopy1[<span class="number">1</span>]);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"mArrayCopy1 = %p %@ %p %@"</span>,mArrayCopy1,mArrayCopy1,mArrayCopy1[<span class="number">0</span>],mArrayCopy1[<span class="number">0</span>]);</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">array1      = <span class="number">0</span>x7fafebdeaed0 (<span class="tag">a</span>,<span class="tag">b</span>,c) 	<span class="number">0</span>x1064e7228 <span class="tag">b</span></span><br><span class="line">arrayCopy1  = <span class="number">0</span>x7fafebdeaed0 (<span class="tag">a</span>,<span class="tag">b</span>,c) 	<span class="number">0</span>x1064e7228 <span class="tag">b</span></span><br><span class="line">mArrayCopy1 = <span class="number">0</span>x7fafebdfc010 (<span class="tag">b</span>,c,de) 	<span class="number">0</span>x1064e7228 b</span><br></pre></td></tr></table></figure>
<p>示例：<br>可变数组</p>
<figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="name">NSArray</span> *<span class="atom">array1</span> = [<span class="name">NSArray</span> <span class="atom">arrayWithObjects</span>:@<span class="string">"a"</span>,@<span class="string">"b"</span>,@<span class="string">"c"</span>,<span class="atom">nil</span>];</span><br><span class="line"><span class="name">NSMutableArray</span> *<span class="atom">mArrayCopy</span> = [[<span class="name">NSMutableArray</span> <span class="atom">alloc</span>] <span class="atom">initWithArray</span>:<span class="atom">array1</span> <span class="atom">copyItems</span>:<span class="name">YES</span>];</span><br><span class="line"><span class="name">NSLog</span>(@<span class="string">"array1      = %p %@ %p %@ %p %@"</span>,<span class="atom">array1</span>,    <span class="atom">array1</span>,     <span class="atom">array1</span>[<span class="number">0</span>],      <span class="atom">array1</span>[<span class="number">0</span>],      <span class="atom">array1</span>[<span class="number">1</span>],      <span class="atom">array1</span>[<span class="number">1</span>]);</span><br><span class="line"><span class="name">NSLog</span>(@<span class="string">"arrayCopy1  = %p %@ %p %@ %p %@"</span>,<span class="atom">mArrayCopy</span>,<span class="atom">mArrayCopy</span>, <span class="atom">mArrayCopy</span>[<span class="number">0</span>],  <span class="atom">mArrayCopy</span>[<span class="number">0</span>],  <span class="atom">mArrayCopy</span>[<span class="number">1</span>],  <span class="atom">mArrayCopy</span>[<span class="number">1</span>]);</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array1      = <span class="number">0</span>x7fafebcb5ae0 (<span class="tag">a</span>,<span class="tag">b</span>,c)	 <span class="number">0</span>x10afe1208 <span class="tag">a</span> <span class="number">0</span>x10afe1228 <span class="tag">b</span></span><br><span class="line">arrayCopy1  = <span class="number">0</span>x7fafebcb5b10 (<span class="tag">a</span>,<span class="tag">b</span>,c)	 <span class="number">0</span>x10afe1208 <span class="tag">a</span> <span class="number">0</span>x10afe1228 b</span><br></pre></td></tr></table></figure>
<p>示例2：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSArray</span> *array1 = [<span class="built_in">NSArray</span> arrayWithObjects:[<span class="built_in">NSMutableString</span> stringWithString:<span class="string">@"a"</span>],<span class="string">@"b"</span>,<span class="string">@"c"</span>,<span class="literal">nil</span>];</span><br><span class="line"><span class="built_in">NSMutableArray</span> *mArrayCopy = [[<span class="built_in">NSMutableArray</span> alloc] initWithArray:array1 copyItems:<span class="literal">YES</span>];</span><br><span class="line"><span class="built_in">NSArray</span>* mArrayCopy2 = [<span class="built_in">NSKeyedUnarchiver</span> unarchiveObjectWithData:[<span class="built_in">NSKeyedArchiver</span> archivedDataWithRootObject: array1]];</span><br></pre></td></tr></table></figure>
<blockquote>
<p>mArrayCopy2是完全意义上的深拷贝，而mArrayCopy则不是</p>
<p>对于mArrayCopy内的不可变元素其还是指针复制。或者我们自己实现深拷贝的方法。因为如果容器的某一元素是不可变的，那你复制完后该对象仍旧是不能改变的，因此只需要指针复制即可。除非你对容器内的元素重新赋值，否则指针复制即已足够。</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-2015-08-21" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/08/21/2015-08-21/" class="article-date">
  	<time datetime="2015-08-21T12:00:00.000Z" itemprop="datePublished">2015-08-21</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/21/2015-08-21/">那些年我们用过的第三方库</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="SnapKit（Masonry）_的使用_-_杨志平">SnapKit（Masonry） 的使用 - 杨志平</h2><blockquote>
<p>这两个库的用法都是差不多的，只是由两个不同的人来主导开源  <br><br><strong><a href="https://github.com/SnapKit/SnapKit" target="_blank" rel="external">SnapKit</a></strong>是Swift版 <br><br><strong><a href="https://github.com/SnapKit/Masonry" target="_blank" rel="external">Masonry</a></strong>是OC版    </p>
<p>自动布局及交互式编程是iOS开发的趋势，同时Swift也会在不久将来替换OC语言。所以现在的iOS开发者可以开始学习Swift2.0 以及应用 Autolayout 来编程</p>
</blockquote>
<h3 id="代码对比（概况了解）">代码对比（概况了解）</h3><h5 id="开始前OC原生布局代码">开始前OC原生布局代码</h5><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">UIView</span> *superview = <span class="keyword">self</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">UIView</span> *view1 = [[<span class="built_in">UIView</span> alloc] init];</span><br><span class="line">view1<span class="variable">.translatesAutoresizingMaskIntoConstraints</span> = <span class="literal">NO</span>;</span><br><span class="line">view1<span class="variable">.backgroundColor</span> = [<span class="built_in">UIColor</span> greenColor];</span><br><span class="line">[superview addSubview:view1];</span><br><span class="line"></span><br><span class="line"><span class="built_in">UIEdgeInsets</span> padding = <span class="built_in">UIEdgeInsetsMake</span>(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">[superview addConstraints:@[</span><br><span class="line"></span><br><span class="line">   <span class="comment">//view1 constraints</span></span><br><span class="line">   [<span class="built_in">NSLayoutConstraint</span> constraintWithItem:view1</span><br><span class="line">                                attribute:<span class="built_in">NSLayoutAttributeTop</span></span><br><span class="line">                                relatedBy:<span class="built_in">NSLayoutRelationEqual</span></span><br><span class="line">                                   toItem:superview</span><br><span class="line">                                attribute:<span class="built_in">NSLayoutAttributeTop</span></span><br><span class="line">                               multiplier:<span class="number">1.0</span></span><br><span class="line">                                 constant:padding<span class="variable">.top</span>],</span><br><span class="line"></span><br><span class="line">   [<span class="built_in">NSLayoutConstraint</span> constraintWithItem:view1</span><br><span class="line">                                attribute:<span class="built_in">NSLayoutAttributeLeft</span></span><br><span class="line">                                relatedBy:<span class="built_in">NSLayoutRelationEqual</span></span><br><span class="line">                                   toItem:superview</span><br><span class="line">                                attribute:<span class="built_in">NSLayoutAttributeLeft</span></span><br><span class="line">                               multiplier:<span class="number">1.0</span></span><br><span class="line">                                 constant:padding<span class="variable">.left</span>],</span><br><span class="line"></span><br><span class="line">   [<span class="built_in">NSLayoutConstraint</span> constraintWithItem:view1</span><br><span class="line">                                attribute:<span class="built_in">NSLayoutAttributeBottom</span></span><br><span class="line">                                relatedBy:<span class="built_in">NSLayoutRelationEqual</span></span><br><span class="line">                                   toItem:superview</span><br><span class="line">                                attribute:<span class="built_in">NSLayoutAttributeBottom</span></span><br><span class="line">                               multiplier:<span class="number">1.0</span></span><br><span class="line">                                 constant:-padding<span class="variable">.bottom</span>],</span><br><span class="line"></span><br><span class="line">   [<span class="built_in">NSLayoutConstraint</span> constraintWithItem:view1</span><br><span class="line">                                attribute:<span class="built_in">NSLayoutAttributeRight</span></span><br><span class="line">                                relatedBy:<span class="built_in">NSLayoutRelationEqual</span></span><br><span class="line">                                   toItem:superview</span><br><span class="line">                                attribute:<span class="built_in">NSLayoutAttributeRight</span></span><br><span class="line">                               multiplier:<span class="number">1</span></span><br><span class="line">                                 constant:-padding<span class="variable">.right</span>],</span><br><span class="line">	]];</span><br></pre></td></tr></table></figure>
<h5 id="使用Masonry">使用Masonry</h5><p>精简</p>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">UIEdgeInsets padding = UIEdgeInsetsMake<span class="params">(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>)</span>;</span><br><span class="line"></span><br><span class="line">[view1 mas_makeConstraints:^<span class="params">(MASConstraintMaker *make)</span> &#123;</span><br><span class="line">   make.top.equalTo<span class="params">(superview.mas_top)</span>.with.<span class="built_in">offset</span><span class="params">(padding.top)</span>; <span class="comment">//with 	is an optional semantic filler</span></span><br><span class="line">	make.left.equalTo<span class="params">(superview.mas_left)</span>.with.<span class="built_in">offset</span><span class="params">(padding.left)</span>;</span><br><span class="line">	make.bottom.equalTo<span class="params">(superview.mas_bottom)</span>.with.<span class="built_in">offset</span><span class="params">(-	padding.bottom)</span>;</span><br><span class="line">	make.right.equalTo<span class="params">(superview.mas_right)</span>.with.<span class="built_in">offset</span><span class="params">(-padding.right)</span>;</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<p>更加精简</p>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="collection">[view1 mas_makeConstraints:^<span class="list">(<span class="keyword">MASConstraintMaker</span> *make)</span> <span class="collection">&#123;</span><br><span class="line"> 	 	 make.edges.equalTo<span class="list">(<span class="keyword">superview</span>)</span>.with.insets<span class="list">(<span class="keyword">padding</span>)</span><span class="comment">;</span></span><br><span class="line">&#125;</span>]</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<h5 id="同理使用SnapKit">同理使用SnapKit</h5><p>精简</p>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">let</span> box = UIView<span class="params">()</span></span><br><span class="line">superview.addSubview<span class="params">(box)</span></span><br><span class="line"></span><br><span class="line">box.snp_makeConstraints &#123; <span class="params">(make)</span> -&gt; Void in</span><br><span class="line">	make.top.equalTo<span class="params">(superview)</span>.<span class="built_in">offset</span><span class="params">(<span class="number">20</span>)</span></span><br><span class="line">	make.left.equalTo<span class="params">(superview)</span>.<span class="built_in">offset</span><span class="params">(<span class="number">20</span>)</span></span><br><span class="line">	make.bottom.equalTo<span class="params">(superview)</span>.<span class="built_in">offset</span><span class="params">(-<span class="number">20</span>)</span></span><br><span class="line">   	make.right.equalTo<span class="params">(superview)</span>.<span class="built_in">offset</span><span class="params">(-<span class="number">20</span>)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>更加精简</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">box.snp_makeConstraints &#123; <span class="function"><span class="params">(make)</span> -&gt;</span> Void <span class="keyword">in</span></span><br><span class="line">   	make.edges.equalTo(superview).inset(UIEdgeInsetsMake(<span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="如何使用_&amp;&amp;_原理">如何使用 &amp;&amp; 原理</h3><h4 id="常见的约束类型对比">常见的约束类型对比</h4><table>
<thead>
<tr>
<th>ViewAttribute</th>
<th>NSLayoutAttribute</th>
</tr>
</thead>
<tbody>
<tr>
<td>view.snp_left</td>
<td>NSLayoutAttribute.Left</td>
</tr>
<tr>
<td>view.snp_right</td>
<td>NSLayoutAttribute.Right</td>
</tr>
<tr>
<td>view.snp_top</td>
<td>NSLayoutAttribute.Top</td>
</tr>
<tr>
<td>view.snp_bottom</td>
<td>NSLayoutAttribute.Bottom</td>
</tr>
<tr>
<td>view.snp_leading</td>
<td>NSLayoutAttribute.Leading</td>
</tr>
<tr>
<td>view.snp_trailing</td>
<td>NSLayoutAttribute.Trailing</td>
</tr>
<tr>
<td>view.snp_width</td>
<td>NSLayoutAttribute.Width</td>
</tr>
<tr>
<td>view.snp_height</td>
<td>NSLayoutAttribute.Height</td>
</tr>
<tr>
<td>view.snp_centerX</td>
<td>NSLayoutAttribute.CenterX</td>
</tr>
<tr>
<td>view.snp_centerY</td>
<td>NSLayoutAttribute.CenterY</td>
</tr>
<tr>
<td>view.snp_baseline</td>
<td>NSLayoutAttribute.Baseline</td>
</tr>
</tbody>
</table>
<h4 id="常见的用法">常见的用法</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">make<span class="class">.top</span><span class="class">.equalTo</span>(<span class="number">42</span>)</span><br><span class="line">make<span class="class">.lessThanOrEqualTo</span><span class="class">.equalTo</span>(SuperView)</span><br><span class="line">make<span class="class">.top</span><span class="class">.equalTo</span>(SuperView)</span><br><span class="line">make<span class="class">.size</span><span class="class">.equalTo</span>(<span class="function"><span class="title">CGSizeMake</span><span class="params">(<span class="number">50</span>, <span class="number">100</span>)</span></span>)</span><br><span class="line">make<span class="class">.edges</span><span class="class">.equalTo</span>(<span class="function"><span class="title">UIEdgeInsetsMake</span><span class="params">(<span class="number">10</span>, <span class="number">0</span>, <span class="number">10</span>, <span class="number">0</span>)</span></span>)</span><br><span class="line">make<span class="class">.left</span><span class="class">.equalTo</span>(view).<span class="function"><span class="title">offset</span><span class="params">(UIEdgeInsetsMake(<span class="number">10</span>, <span class="number">0</span>, <span class="number">10</span>, <span class="number">0</span>)</span></span>)</span><br><span class="line"></span><br><span class="line">make<span class="class">.height</span><span class="class">.equalTo</span>(OtherView).<span class="function"><span class="title">offset</span><span class="params">(<span class="number">10</span>)</span></span></span><br><span class="line">make<span class="class">.trailing</span><span class="class">.equalTo</span>(OtherView.snp_trailing).<span class="function"><span class="title">offset</span><span class="params">(<span class="number">10</span>)</span></span></span><br><span class="line">make<span class="class">.bottom</span><span class="class">.equalTo</span>(-<span class="number">20</span>).<span class="function"><span class="title">priority</span><span class="params">(<span class="number">250</span>)</span></span></span><br></pre></td></tr></table></figure>
<h4 id="对比交互式编程的约束布局">对比交互式编程的约束布局</h4><p><img src="https://cloud.githubusercontent.com/assets/9360037/9401926/1e572316-4809-11e5-9a96-430e688cda85.png" alt="image"></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-2015-07-26" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/07/27/2015-07-26/" class="article-date">
  	<time datetime="2015-07-26T16:08:35.000Z" itemprop="datePublished">2015-07-26</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/27/2015-07-26/">[上海] Android 小伙伴一起来 51offer 玩吧</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>国内留学行业整体上还是一个传统中介行业，51offer 致力于让人们更方便的通过互联网留学。<br>留学学生和留学学校虽然五花八门，但既有的留学流程大体一致，相应的盈利模式也比较清晰。但与之对应的如何切实通过产品降低留学门槛，在更多的学生与学校之间建立便利的联系，还有很多好玩的事情可以做。<br>在互联网留学这一块，51offer 目前可以算国内第一，同时身为一个互联网从业者客观来说，这个行业各公司产品、技术各方面还非常烂（包括我们 51offer）。</p>
<p>要做的事情很多，要决定不做的事情更多，要把不好变好的事情也有不少。<br>如果你愿意挑战既有现状，喜欢用聪明的方式把事情做好，最好再对这个教育细分领域感兴趣，让我们一起来做些有意义的事。</p>
<p>本人曾铭，ID: mithvv，目前负责公司移动团队。丁香园和百姓网的工作经历让我相信小而扁平的团队组织更加高效。如果前几天耗子和玉伯你站在耗子的一方，嗯，你会喜欢我们目前的合作方式。（ಥ_ಥ，想说玉伯也是我非常尊敬的前辈，他的观点适合支付宝……）</p>
<h2 id="公司状况">公司状况</h2><ul>
<li>刚过 B 轮，<a href="http://cn.technode.com/post/2015-07-22/51offer-financing/" target="_blank" rel="external">两年内完成 5000 万美元融资</a>，自身盈利也一直很好，生死存亡的问题你暂时不用担心</li>
<li>我们基本不加班甚至很难让你加班，因为我们所有的加班（以小时计）都可以调休。我个人是每周三调休带孩子玩，周日上一天班 ；）</li>
<li>公司在上海火车站边上，地铁出站过个路口就到（下雨天忘带伞问题都不大）</li>
<li>技术团队人数目前 50+，谨慎扩张中</li>
<li>技术语言各端不同。后端主要是 Java（大部分），搜索 C++，爬虫 Python，前端和移动各公司应该区别不大，移动这边 Swift 正在一起学习，计划 2.0 正式版出来后用到产品中</li>
</ul>
<h2 id="招聘要求（不罗列每个职位的技术细节了，意义不大）">招聘要求（不罗列每个职位的技术细节了，意义不大）</h2><ul>
<li>招 Android、Java、前端工程师，是工程师或者攻城狮，不招码农</li>
<li>至少作为主程参与过一个产品的完整开发过程</li>
<li>会或者可以快速学会 git，这样我们能快速在 Github 上玩起来</li>
<li>有经验或者了解持续集成、自动化测试及其意义，这样我们在如何快速开发上比较容易达成一致</li>
<li>能把一个技术点用自己的语言阐述清楚，我们的周技术分享期待你的 ShowTime</li>
<li>加分项<ul>
<li>践行开源</li>
<li>能跟产品从产品角度阐述清楚技术逻辑</li>
<li>有稳定维护的 Blog 或 Github 帐号</li>
<li>能自由访问国际互联网（如果不会我们教你，这点其实也必备）</li>
<li>对技术有热情，（比如上面一些条件你并不完全满足，但你自认思路清晰，学习能力强，就是要来面一面。我们非常非常欢迎对技术有热情的你！）</li>
</ul>
</li>
</ul>
<h2 id="薪资待遇">薪资待遇</h2><ul>
<li>整体 10k - 20k 之间，具体面议，牛人没法封顶</li>
</ul>
<p>你都看到这了，简历快发给我吧: ming.z[at]51offer.com （24 小时内必有反馈哦）<br>有意聊天者时间你定，地点我定（工作忙，上海火车站附近即可），咖啡我请 ；）</p>
<p>原始链接：<a href="http://51offer.github.io/2015/07/26/%E4%B8%8A%E6%B5%B7-Android-%E5%B0%8F%E4%BC%99%E4%BC%B4%E4%B8%80%E8%B5%B7%E6%9D%A5-51offer-%E7%8E%A9%E5%90%A7/" target="_blank" rel="external">51offer-blog</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-2015-07-24" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/07/24/2015-07-24/" class="article-date">
  	<time datetime="2015-07-24T09:46:13.000Z" itemprop="datePublished">2015-07-24</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/07/24/2015-07-24/">简单谈谈计算机网络</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="计算机网络安全">计算机网络安全</h2><h3 id="2015网络安全事件">2015网络安全事件</h3><ul>
<li>携程网内部员工误删除代码 网站整体宕机12小时</li>
<li>支付宝机房电缆被挖断 部分区域服务中断</li>
<li>网易骨干网遭攻击 百万用户无法打游戏</li>
<li>海康威视被黑客植入代码 导致被远程监控</li>
</ul>
<h3 id="敏感数据（账号、密码等）">敏感数据（账号、密码等）</h3><ul>
<li>账号密码（post明文显示）</li>
<li>重要资源数据（防爬虫）</li>
<li>多重账号威胁（网络账号通用）</li>
<li>通讯协议破解（iMessage）</li>
</ul>
<h3 id="网络传输加密">网络传输加密</h3><ul>
<li><p>数据加密算法</p>
<ul>
<li>对称式加密技术    (加密-解密)<ul>
<li>DES（Data Encryption Standard）<blockquote>
<p>数据加密标准，速度较快，适用于加密大量数据的场合。</p>
</blockquote>
</li>
<li>3DES（Triple DES）<blockquote>
<p>是基于DES，对一块数据用三个不同的密钥进行三次加密，强度更高。</p>
</blockquote>
</li>
<li>AES（Advanced Encryption Standard）<blockquote>
<p>高级加密标准，是下一代的加密算法标准，速度快，安全级别高；</p>
</blockquote>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code>-<span class="ruby"> 非对称式加密技术（公钥-私钥）
</span>    -<span class="ruby"> <span class="constant">RSA</span>
</span>    &gt;是一个支持变长密钥的公共密钥算法，需要加密的文件块的长度也是可变的；
    -<span class="ruby"> <span class="constant">DSA</span>（<span class="constant">Digital</span> <span class="constant">Signature</span> <span class="constant">Algorithm</span>）
</span>    &gt;数字签名算法，是一种标准的 DSS（数字签名标准）；
    -<span class="ruby"> <span class="constant">ECC</span>（<span class="constant">Elliptic</span> <span class="constant">Curves</span> <span class="constant">Cryptography</span>）
</span>    &gt;椭圆曲线密码编码学。

-<span class="ruby"> 散列算法 （不可逆）
</span>    -<span class="ruby"> <span class="constant">MD5</span>（<span class="constant">Message</span> <span class="constant">Digest</span> <span class="constant">Algorithm</span> <span class="number">5</span>）
</span>    &gt;是RSA数据安全公司开发的一种单向散列算法，非可逆，相同的明文产生相同的密文。
    -<span class="ruby"> <span class="constant">SHA</span>（<span class="constant">Secure</span> <span class="constant">Hash</span> <span class="constant">Algorithm</span>）
</span>    &gt;可以对任意长度的数据运算生成一个160位的数值；
</code></pre><p><a href="http://www.iplaysoft.com/encrypt-arithmetic.html" target="_blank" rel="external">3个著名加密算法(MD5、RSA、DES)的解析</a></p>
<h3 id="简单加密演示">简单加密演示</h3><ul>
<li>简单位移式加密（经典：凯撒加密）</li>
</ul>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">“恺撒密码”据传是古罗马恺撒大帝用来保护重要军情的加密系统。它是一种替代密码，通过将字母按顺序推后起3位起到加密作用，</span><br><span class="line">如将字母A换作字母<span class="keyword">D</span>，将字母B换作字母<span class="keyword">E</span>。据说恺撒是率先使用加密函的古代将领之一，因此这种加密方法被称为恺撒密码。</span><br><span class="line">假如有这样一条指令：</span><br><span class="line"><span class="keyword">RETURN</span> TO ROME</span><br><span class="line">用恺撒密码加密后就成为：</span><br><span class="line">UHWXUA WR URPH</span><br></pre></td></tr></table></figure>
<ul>
<li>置换加密</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">令明文m=m1,m2,...mL。令置换矩阵所决定的置换为pi，则加密置换c=<span class="function"><span class="title">Ek</span><span class="params">(m)</span></span>=(c1,c2,...cL)=<span class="function"><span class="title">mpi</span><span class="params">(<span class="number">1</span>)</span></span>,<span class="function"><span class="title">mpi</span><span class="params">(<span class="number">2</span>)</span></span>,...,<span class="function"><span class="title">mpi</span><span class="params">(L)</span></span></span><br><span class="line">解密置换</span><br><span class="line">d=<span class="function"><span class="title">Dk</span><span class="params">(c)</span></span>=(cn^-<span class="number">1</span>(<span class="number">1</span>),cn^-<span class="number">1</span>(<span class="number">2</span>),...cn^-<span class="number">1</span>(L))</span><br><span class="line">例，置换密码。给定明文为the simplest possible transposition ciphers,</span><br><span class="line">将明文分成长为L=<span class="number">5</span>的段，</span><br><span class="line">m1=thesi, m2=mples m3=tposs m4=iblet,</span><br><span class="line">m5=ransp, m6=ositi m7=oncip m8=hersx</span><br><span class="line">最后一段长不足<span class="number">5</span>，加添一个字母x。将隔断的字母序号按下述置换矩阵进行换位：</span><br><span class="line">Ek= <span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span></span><br><span class="line"><span class="number">3</span> <span class="number">0</span> <span class="number">4</span> <span class="number">2</span> <span class="number">1</span></span><br><span class="line">得到密文如下</span><br><span class="line">STIEH EMSLP STSOP EITLB SRPNA TOIIS IOPCN SHXRE</span><br></pre></td></tr></table></figure>
<hr>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 XcodeYang
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>